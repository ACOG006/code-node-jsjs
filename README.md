–Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—Ç–µ—Ä–¥—ñ –∫–µ“£–µ–π—Ç—É: CREATE/UPDATE/DELETE “Ø—à—ñ–Ω —Ç–æ–ª—ã“õ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è–ª—ã“õ —Ç–µ—Å—Ç—Ç–µ—Ä (Supertest).

–ë“±–ª ‚Äì –≤–µ–±-“õ–æ—Å—ã–º—à–∞–Ω—ã“£ (–∫”©–±—ñ–Ω–µ Node.js + Express) API-–ª–∞—Ä—ã–Ω —Ç–æ–ª—ã“õ —Ç–µ–∫—Å–µ—Ä—É “Ø—à—ñ–Ω –∂–∞–∑—ã–ª–∞—Ç—ã–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è–ª—ã“õ —Ç–µ—Å—Ç—Ç–µ—Ä.
–¢–µ—Å—Ç—Ç–µ—Ä Supertest –ø–∞–∫–µ—Ç—ñ –∞—Ä“õ—ã–ª—ã —Å–µ—Ä–≤–µ—Ä–≥–µ —à—ã–Ω–∞–π—ã HTTP —Å“±—Ä–∞–Ω—ã—Å—Ç–∞—Ä –∂–∞—Å–∞–ø, CREATE / UPDATE / DELETE –æ–ø–µ—Ä–∞—Ü–∏—è–ª–∞—Ä—ã –¥“±—Ä—ã—Å –∂“±–º—ã—Å —ñ—Å—Ç–µ–π—Ç—ñ–Ω—ñ–Ω —Ç–µ–∫—Å–µ—Ä–µ–¥—ñ.

–Æ–Ω–∏—Ç-—Ç–µ—Å—Ç –ø–µ–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è–ª—ã“õ —Ç–µ—Å—Ç—Ç—ñ“£ –∞–π—ã—Ä–º–∞—Å—ã:

–¢“Ø—Ä—ñ	–ù–µ —Ç–µ–∫—Å–µ—Ä–µ–¥—ñ	–ï—Ä–µ–∫—à–µ–ª—ñ–≥—ñ
–Æ–Ω–∏—Ç-—Ç–µ—Å—Ç	–ñ–µ–∫–µ —Ñ—É–Ω–∫—Ü–∏—è, –ª–æ–≥–∏–∫–∞	–¢–µ–∫ –∫–æ–¥—Ç—ã“£ —ñ—à–∫—ñ –∂“±–º—ã—Å—ã–Ω —Ç–µ–∫—Å–µ—Ä–µ–¥—ñ
–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è–ª—ã“õ —Ç–µ—Å—Ç	API, –¥–µ—Ä–µ–∫“õ–æ—Ä, —Ä–æ—É—Ç–µ—Ä	–®—ã–Ω–∞–π—ã —Å–µ—Ä–≤–µ—Ä–≥–µ —Å“±—Ä–∞–Ω—ã—Å –∂–∞—Å–∞–π–¥—ã

Supertest ‚Äì Express —Å–µ—Ä–≤–µ—Ä—ñ–Ω–µ HTTP –∞—Ä“õ—ã–ª—ã —Å“±—Ä–∞–Ω—ã—Å –∂–∞—Å–∞—É“ì–∞ –∞—Ä–Ω–∞–ª“ì–∞–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è–ª—ã“õ —Ç–µ—Å—Ç “õ“±—Ä–∞–ª—ã.

üìå CMD (“ö–∞–¥–∞–º–¥—ã“õ –∂–æ—Å–ø–∞—Ä)
1. –¢–µ—Å—Ç—ñ–ª–µ—É –æ—Ä—Ç–∞—Å—ã–Ω –¥–∞–π—ã–Ω–¥–∞—É

Node.js –æ—Ä–Ω–∞—Ç—ã–ª“ì–∞–Ω—ã–Ω —Ç–µ–∫—Å–µ—Ä—É

–ñ–æ–±–∞“ì–∞ Supertest –∂”ô–Ω–µ Jest/Mocha –æ—Ä–Ω–∞—Ç—É

npm install supertest jest --save-dev


Test database –±–∞–ø—Ç–∞—É (“õ–∞–∂–µ—Ç –±–æ–ª—Å–∞ SQLite/In-memory)

2. –¢–µ—Å—Ç “õ“±—Ä—ã–ª—ã–º—ã–Ω –¥–∞–π—ã–Ω–¥–∞—É

tests/ –ø–∞–ø–∫–∞—Å—ã–Ω “õ“±—Ä—É

–¢–µ—Å—Ç —Ñ–∞–π–ª—ã–Ω –∂–∞—Å–∞—É:

tests/user.test.js


–°–µ—Ä–≤–µ—Ä–¥—ñ –∏–º–ø–æ—Ä—Ç—Ç–∞—É

const request = require("supertest");
const app = require("../app");

3. CREATE (POST) –æ–ø–µ—Ä–∞—Ü–∏—è—Å—ã–Ω–∞ —Ç–µ—Å—Ç –∂–∞–∑—É

–ú–∞“õ—Å–∞—Ç—ã: –∂–∞“£–∞ —Ä–µ—Å—É—Ä—Å –¥“±—Ä—ã—Å –∂–∞—Å–∞–ª–∞—Ç—ã–Ω—ã–Ω —Ç–µ–∫—Å–µ—Ä—É

/api/users –º–∞—Ä—à—Ä—É—Ç—ã–Ω–∞ POST –∂—ñ–±–µ—Ä—É

201 —Å—Ç–∞—Ç—É—Å –∫“Ø—Ç—É

JSON —ñ—à—ñ–Ω–¥–µ –¥“±—Ä—ã—Å “õ“±—Ä—ã–ª—ã–º –±–∞—Ä—ã–Ω —Ç–µ–∫—Å–µ—Ä—É

4. UPDATE (PUT/PATCH) –æ–ø–µ—Ä–∞—Ü–∏—è—Å—ã–Ω–∞ —Ç–µ—Å—Ç –∂–∞–∑—É

–ú–∞“õ—Å–∞—Ç—ã: –±–∞—Ä –¥–µ—Ä–µ–∫ –¥“±—Ä—ã—Å –∂–∞“£–∞—Ä—Ç—ã–ª–∞—Ç—ã–Ω—ã–Ω —Ç–µ–∫—Å–µ—Ä—É

–ê–ª–¥—ã–º–µ–Ω “õ–æ–ª–¥–∞–Ω—É—à—ã–Ω—ã –∂–∞—Å–∞—É

/api/users/:id –º–∞—Ä—à—Ä—É—Ç—ã–Ω–∞ PUT –∂—ñ–±–µ—Ä—É

”®–∑–≥–µ—Ä—ñ—Å —Å–∞“õ—Ç–∞–ª“ì–∞–Ω—ã–Ω —Ç–µ–∫—Å–µ—Ä—É

5. DELETE –æ–ø–µ—Ä–∞—Ü–∏—è—Å—ã–Ω–∞ —Ç–µ—Å—Ç –∂–∞–∑—É

–ú–∞“õ—Å–∞—Ç—ã: —Ä–µ—Å—É—Ä—Å –¥“±—Ä—ã—Å ”©—à—ñ—Ä—ñ–ª–µ—Ç—ñ–Ω—ñ–Ω —Ç–µ–∫—Å–µ—Ä—É

–ê–ª–¥—ã–º–µ–Ω “õ–æ–ª–¥–∞–Ω—É—à—ã–Ω—ã –∂–∞—Å–∞—É

/api/users/:id DELETE —Å“±—Ä–∞–Ω—ã—Å—ã–Ω –æ—Ä—ã–Ω–¥–∞—É

200 –Ω–µ–º–µ—Å–µ 204 —Å—Ç–∞—Ç—É—Å –∫“Ø—Ç—É

”®—à—ñ—Ä—ñ–ª–≥–µ–Ω –¥–µ—Ä–µ–∫—Ç—ñ “õ–∞–π—Ç–∞ —à–∞“õ—ã—Ä“ì–∞–Ω–¥–∞ 404 “õ–∞–π—Ç—É—ã–Ω —Ç–µ–∫—Å–µ—Ä—É

6. “ö–æ—Å—ã–º—à–∞ –∂–∞“ì–¥–∞–π–ª–∞—Ä–¥—ã —Ç–µ–∫—Å–µ—Ä—É (Negative tests)
ID —Ç–∞–±—ã–ª–º–∞—Å–∞ ‚Üí 404
–î“±—Ä—ã—Å –µ–º–µ—Å JSON ‚Üí 400
–î–µ—Ä–µ–∫“õ–æ—Ä “õ–∞—Ç–µ—Å—ñ (mock)

7. –¢–µ—Å—Ç—Ç—ñ —ñ—Å–∫–µ “õ–æ—Å—É
npm test

8. –¢–µ—Å—Ç –Ω”ô—Ç–∏–∂–µ–ª–µ—Ä—ñ–Ω —Ç–∞–ª–¥–∞—É
“ö–∞–π —Ç–µ—Å—Ç —Å”ô—Ç—Å—ñ–∑ –±–æ–ª–¥—ã ‚Üí “õ–∞—Ç–µ –∫–æ–¥—Ç—ã —Ç“Ø–∑–µ—Ç—É
CI –∂“Ø–π–µ—Å—ñ–Ω–µ “õ–æ—Å—É (GitHub Actions, GitLab CI)
9. “ö–æ—Ä—ã—Ç—ã–Ω–¥—ã
–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è–ª—ã“õ —Ç–µ—Å—Ç API-–¥—ã“£ —Ç–æ–ª—ã“õ –∂“±–º—ã—Å—ã–Ω —Ç–µ–∫—Å–µ—Ä–µ–¥—ñ

CREATE/UPDATE/DELETE –ª–æ–≥–∏–∫–∞—Å—ã —Ç–æ–ª—ã“õ “õ–æ—Ä“ì–∞–ª“ì–∞–Ω –±–æ–ª–∞–¥—ã

–ñ–æ–±–∞ “õ–∞—É—ñ–ø—Å—ñ–∑ ”ô—Ä—ñ —Ç“±—Ä–∞“õ—Ç—ã –∂“±–º—ã—Å —ñ—Å—Ç–µ–π–¥—ñ
